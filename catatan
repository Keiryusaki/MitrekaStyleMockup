SOP Sync mitreka-ui <-> MitrekaStyleMockup (lokal saja)

Tujuan:
- Update komponen/CSS di mitreka-ui dan memastikan mockup ikut sinkron.
- Catatan ini untuk internal, bukan untuk developer.

Lokasi repo (lokal):
- mitreka-ui: D:\Mitreka\Office\Product\MitrekaStyleGuide\mitreka-ui
- MitrekaStyleMockup: D:\Mitreka\Office\Product\MitrekaStyleGuide\MitrekaStyleMockup

Checklist:
1) Update mitreka-ui
   - Edit di: mitreka-ui/src
   - Bump versi (mitreka-ui/package.json)
   - Build: npm run build (di repo mitreka-ui)
   - Jika pakai Vue component, update tipe props di src/vue/*.vue
   - Catatan: build menghasilkan dist + d.ts (dist/vue/*.d.ts)
   - Catatan baru: CSS tambahan dari MitrekaStyleMockup sudah digabung ke mitreka-ui
     lewat `mitreka-ui/src/css/mockup.css` dan diimport di `mitreka-ui/src/css/index.css`.
     Jadi consumer cukup pakai `@keiryusaki/mitreka-ui/css` untuk full style.

2) Sync ke Mockup
   - Copy mitreka-ui/dist/css -> MitrekaStyleMockup/src/lib/mitreka-ui
   - Copy mitreka-ui/dist -> MitrekaStyleMockup/src/lib/mitreka-ui-dist
   - Update versi app: MitrekaStyleMockup/package.json
   - Update changelog halaman jika rilisnya memang mau diumumkan
   - Pastikan versi sinkron: package mitreka-ui, versi app mockup, dan entry terbaru di changelog

3) Dependency mode
   - Belum publish: gunakan "file:../mitreka-ui" di MitrekaStyleMockup/package.json
   - Sudah publish: ganti ke versi semver dan npm install

Catatan:
- Untuk pengingat internal, cukup baca halaman Changelog jika butuh konteks rilis.
- Tambah entry changelog hanya saat memang mau tampil di halaman changelog (publik).
- Cek ulang sebelum push: jangan ada mismatch versi (contoh: changelog 2.2.14, dashboard 2.2.15, package 2.2.17).
- File `MitrekaStyleMockup/catatan` adalah catatan internal; tidak wajib ikut commit/push.
- Wajib cek konsistensi versi lintas area sebelum push:
  package version, release label di dashboard/what's new, footer/app version, dan halaman changelog.

Checklist ringkas (5 langkah):
1) Update `mitreka-ui/src` + bump version
2) `npm run build` di repo mitreka-ui
3) Copy `dist/css` -> `MitrekaStyleMockup/src/lib/mitreka-ui`
4) Update versi di `MitrekaStyleMockup/package.json`
5) Jika sudah publish: ganti dependency `file:` ke semver + `npm install`

Catatan bantuan sistem (Codex):
- Biasanya minta bantuan Codex untuk sync, push, dan publish package.
- Minta bantuan Codex untuk menjalankan checklist di atas secara berurutan.

Opsional (backup tanpa Codex):
- Tambah script `sync:mockup` di mitreka-ui untuk copy dist ke mockup.
- Tambah script `release:local` untuk `npm run build && npm run sync:mockup`.

Publish (pakai GitHub Packages):
1) Pastikan sudah commit perubahan di mitreka-ui
2) `npm publish` (prepublishOnly akan jalan build otomatis)
3) Push repo mitreka-ui setelah publish

Catatan publish:
- `npm publish` bisa auto-normalize `repository.url` (warning). Opsional: `npm pkg fix`.
- Setelah publish, ulangi sync dist ke mockup dan commit.

Catatan deploy GH Pages (biar gak gagal):
1) Jangan import `@keiryusaki/mitreka-ui/*` langsung di mockup (runner tidak punya akses repo/registry private).
2) Gunakan vendor dist: `src/lib/mitreka-ui-dist` dan alias Vite ke sana.
3) CSS pakai lokal: `src/lib/mitreka-ui/index.css` (bukan `@keiryusaki/mitreka-ui/css`).
4) Setiap update mitreka-ui: re-copy `mitreka-ui/dist` -> `mitreka-ui-dist` sebelum push.

Standar Starter Pack (wajib konsisten):
- `MitrekaStyleMockup` = source of truth Design System.
- `mitreka-consumer-test` = sandbox testing + validasi standarisasi starter pack.
- Starter pack selalu diturunkan dari `mitreka-consumer-test` yang sudah lolos uji.

Output starter pack:
1) Folder mentah (tanpa install dependency, tanpa node_modules).
2) File zip siap bagikan.

Format nama zip starter pack:
- `mitreka-design-system-starter-pack-vX.Y.Z.zip`
- Contoh: `mitreka-design-system-starter-pack-v2.2.20.zip`

Rule versi starter pack:
- Versi starter pack mengikuti versi komponen/package compatible terbaru.
- Tidak wajib generate starter pack baru setiap ada update package,
  selama update masih backward compatible terhadap starter pack saat ini.
- Jika ada breaking change atau perubahan setup penting, wajib generate ulang starter pack.

Starter pack otomatis (update baru):
- Jangan hardcode versi starter pack di UI.
- Sistem sekarang pakai manifest: `public/downloads/starter-pack.json`.
- Generator manifest: `npm run starter-pack:manifest`
  (script: `scripts/generate-starter-pack-manifest.mjs`).
- `npm run build` di mockup sekarang otomatis generate manifest dulu, lalu build.
- Manifest memilih file zip starter pack dengan versi semver paling besar
  dari folder `public/downloads` (format wajib: `mitreka-design-system-starter-pack-vX.Y.Z.zip`).
- Jadi: kalau ada starter pack baru, cukup taruh zip terbaru di `public/downloads`,
  lalu build (tanpa edit kode `Topbar.vue` lagi).

Checklist final sebelum commit/push rilis:
1) Cek `mitreka-ui/package.json` version sudah benar.
2) Cek `MitrekaStyleMockup/package.json` version sudah sinkron.
3) Cek What's New:
   - `releaseVersion` mengikuti package release.
   - starter pack mengikuti manifest `public/downloads/starter-pack.json`.
4) Cek changelog:
   - `mitreka-ui/CHANGELOG.md` untuk package.
   - `MitrekaStyleMockup/src/pages/Changelog/changelog.json` untuk halaman publik.
5) Cek versi yang tampil di dashboard/footer sudah update.

Ritual awal sesi (biar konteks gak miss):
1) Review file `MitrekaStyleMockup/catatan`.
2) Pastikan alignment 3 repo: `mitreka-ui`, `MitrekaStyleMockup`, `mitreka-consumer-test`.
3) Cek apakah perlu regenerate starter pack berdasarkan compatibility versi terbaru.

Guardrail command destruktif (WAJIB):
1) Hindari `rmdir /s /q`, `del /f /q`, atau command hapus massal dengan path manual.
2) Jika harus hapus, wajib pakai alur soft-delete backup dulu:
   - Rename folder target ke `<nama>_backup_yyyyMMdd_HHmmss`
   - Atau copy dulu ke folder backup terpisah sebelum delete.
3) Sebelum eksekusi hapus, wajib verifikasi path absolut yang akan dihapus (echo/print path).
4) Dilarang menjalankan delete berantai yang mencakup parent directory.

SOP soft-delete (default):
1) Tentukan target: `<TARGET_PATH>`
2) Buat backup name: `<TARGET_PATH>_backup_yyyyMMdd_HHmmss`
3) Rename target -> backup (lebih cepat daripada copy)
4) Kerjakan perubahan pada target baru (fresh clone / fresh copy)
5) Setelah verifikasi aman, backup lama baru boleh dihapus manual

SOP packaging aman (tanpa delete by filter):
1) Buat staging folder baru kosong (nama unik per proses).
2) Copy file/folder dengan whitelist (yang memang mau masuk pack).
3) Generate zip dari staging.
4) Validasi isi zip (tidak boleh ada node_modules/dist/public/downloads/scripts jika tidak perlu).
5) Baru replace artifact final + update manifest.
