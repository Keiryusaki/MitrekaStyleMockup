/* =========================================
   @mitreka/ui - ALS Table Component
   ========================================= */

/* Theme tokens (namespaced) */
[data-als] {
  --als-bg: #fff;
  --als-bg-alt: #f3f4f6;
  --als-border: #e5e7eb;
  --als-border-strong: #d1d5db;
  --als-text: #0f172a;
  --als-text-dim: #334155;
  --als-header-bg: #f8fafc;
  --als-primary: #3b82f6;
  --als-focus: rgba(59, 130, 246, 0.35);

  /* density default: Cozy */
  --als-font-size: 0.875rem;
  --als-cell-py: 0.25rem;
  --als-cell-px: 0.75rem;
}

/* Density overrides */
[data-als][data-density="compact"] {
  --als-cell-py: 0;
  --als-cell-px: 0.5rem;
}
[data-als][data-density="comfortable"] {
  --als-font-size: 0.875rem;
  --als-cell-py: 0.5rem;
  --als-cell-px: 1rem;
}

/* Base scope */
[data-als] {
  border: 1px solid var(--als-border);
  border-radius: 0.5rem;
  background: var(--als-bg);
  overflow: auto;
}

[data-als] table,
table[data-als] {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--als-font-size);
  color: var(--als-text);
  background: var(--als-bg);
}

/* Header (sticky) */
[data-als] thead th,
table[data-als] thead th {
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--als-header-bg);
  color: var(--als-text-dim);
  font-weight: 600;
  text-align: left;
  white-space: nowrap;
  padding: 1rem var(--als-cell-px);
  border-bottom: 1px solid var(--als-border-strong);
}

/* Column dividers */
[data-als] thead th + th,
table[data-als] thead th + th,
[data-als] tbody td + td,
table[data-als] tbody td + td {
  border-left: 1px solid var(--als-border);
}

/* Body */
[data-als] tbody tr,
table[data-als] tbody tr {
  background: var(--als-bg);
  border-bottom: 1px solid var(--als-border);
  transition: background-color 0.12s ease;
}
[data-als] tbody td,
table[data-als] tbody td {
  padding: var(--als-cell-py) var(--als-cell-px);
  vertical-align: middle;
}

/* Zebra striped */
[data-als]:not([data-striped="false"]) tbody tr:nth-child(even),
table[data-als]:not([data-striped="false"]) tbody tr:nth-child(even) {
  background: var(--als-bg-alt);
}

/* Hover */
[data-als] tbody tr:hover,
table[data-als] tbody tr:hover {
  background: #eef2ff33;
}

/* Selected row */
[data-als] tr.is-selected,
table[data-als] tr.is-selected {
  background: #dbeafe;
}

/* Input/select inside table */
[data-als] input[type="text"],
[data-als] input[type="search"],
[data-als] select {
  height: 2rem;
  padding: 0 0.5rem;
  border: 1px solid var(--als-border);
  border-radius: 0.375rem;
  background: #fff;
  color: var(--als-text);
}
[data-als] input:focus,
[data-als] select:focus {
  outline: none;
  border-color: var(--als-primary);
  box-shadow: 0 0 0 3px var(--als-focus);
}

/* Special columns */
[data-als] th[data-col="checkbox"],
[data-als] td[data-col="checkbox"] {
  width: 44px;
  text-align: center;
}
[data-als] th[data-col="index"],
[data-als] td[data-col="index"] {
  width: 64px;
  color: var(--als-text-dim);
}
[data-als] th[data-col="actions"],
[data-als] td[data-col="actions"] {
  width: 120px;
  text-align: right;
}

/* Scrollbar */
[data-als]::-webkit-scrollbar {
  height: 12px;
  width: 12px;
}
[data-als]::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 8px;
  border: 3px solid #f8fafc;
}

/* Toolbar */
.als-toolbar {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
  color: var(--als-text-dim);
  font-size: 0.875rem;
}
.als-toolbar__spacer { flex: 1 1 auto; }

.als-select, .als-checkbox { height: 2rem; }
.als-select {
  appearance: none;
  border: 1px solid var(--als-border);
  border-radius: 0.5rem;
  padding: 0 0.5rem;
  background: #fff;
}

/* Card wrapper */
.als-card {
  border-radius: 0.5rem;
  overflow: hidden;
}

/* Viewport */
.als-viewport {
  overflow: auto;
  max-height: var(--als-max-h, 560px);
}

/* Footer */
.als-footer {
  border-top: 1px solid var(--als-border);
  background: var(--als-bg);
  padding: 0.5rem 0.75rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  color: var(--als-text-dim);
  font-size: 0.875rem;
}
.als-footer__left, .als-footer__center, .als-footer__right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.als-pagination { display: flex; gap: 0.25rem; }

/* Buttons */
.als-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  height: 2rem;
  padding: 0 0.625rem;
  border-radius: 0.5rem;
  border: 1px solid transparent;
  font-weight: 600;
  cursor: pointer;
}
.als-btn--icon { width: 2rem; padding: 0; }
.als-btn--warn { background: #f97316; color: #fff; }
.als-btn--warn:hover { background: #ea580c; }
.als-btn--danger { background: #ef4444; color: #fff; }
.als-btn--danger:hover { background: #dc2626; }
.als-btn[disabled] { opacity: 0.5; cursor: not-allowed; }

/* Height helper */
.als-h-560 { --als-max-h: 560px; }
.als-h-400 { --als-max-h: 400px; }
.als-h-300 { --als-max-h: 300px; }

/* ============ DARK MODE ============ */
.dark [data-als],
[data-als][data-theme="mitrekadark"] {
  --als-bg: #0f172a;
  --als-bg-alt: #0b1220;
  --als-header-bg: #0b1220;
  --als-border: #1f2937;
  --als-border-strong: #334155;
  --als-text: #e5e7eb;
  --als-text-dim: #94a3b8;
  --als-primary: #60a5fa;
  --als-focus: rgba(96, 165, 250, 0.35);
}

.dark [data-als] table,
[data-als][data-theme="mitrekadark"] table {
  background: var(--als-bg);
  color: var(--als-text);
}

.dark [data-als] thead th,
[data-als][data-theme="mitrekadark"] thead th {
  background: var(--als-header-bg);
  color: var(--als-text);
  border-bottom-color: var(--als-border-strong);
}

.dark [data-als] thead th + th,
.dark [data-als] tbody td + td,
[data-als][data-theme="mitrekadark"] thead th + th,
[data-als][data-theme="mitrekadark"] tbody td + td {
  border-left-color: var(--als-border);
}

.dark [data-als]:not([data-striped="false"]) tbody tr:nth-child(even),
[data-als][data-theme="mitrekadark"]:not([data-striped="false"]) tbody tr:nth-child(even) {
  background: var(--als-bg-alt);
}

.dark [data-als] tbody tr:hover,
[data-als][data-theme="mitrekadark"] tbody tr:hover {
  background: rgba(96, 165, 250, 0.08);
}

.dark [data-als] tr.is-selected,
[data-als][data-theme="mitrekadark"] tr.is-selected {
  background: rgba(96, 165, 250, 0.18);
}

.dark [data-als] input[type="text"],
.dark [data-als] input[type="search"],
.dark [data-als] select,
[data-als][data-theme="mitrekadark"] input[type="text"],
[data-als][data-theme="mitrekadark"] input[type="search"],
[data-als][data-theme="mitrekadark"] select {
  background: #0b1220;
  color: var(--als-text);
  border-color: var(--als-border-strong);
}

.dark [data-als]::-webkit-scrollbar-thumb,
[data-als][data-theme="mitrekadark"]::-webkit-scrollbar-thumb {
  background: #334155;
  border-color: #0f172a;
}
